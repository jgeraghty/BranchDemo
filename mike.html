<html>
<head>
  <meta name=viewport content="width=device-width, initial-scale=1, user-scalable=yes">
  <meta name="fileCode" content="nyy" />
  <meta name="team_name" content="New York Yankees" />
  <meta name="team_name_short" content="Yankees" />
  <meta name="stadium_name" content="Yankee Stadium" />
  <meta name="team_color" content="#0C2340" />
  <meta name="team_color_2" content="#FFFFFF" />

  <script type="text/javascript">

	(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent".split(" "), 0);

	branch.init('key_live_amAKfW7aDLFp8CsA7oY7geoewxnTBPGi', function(err, data) {
    	// callback to handle err or data
      console.log(data);

      var data1 = document.querySelector('meta[name="team_name"]');
      var team_name = data1 ? data1.getAttribute("content") : null;

      var data6 = document.querySelector('meta[name="team_name_short"]');
      var team_name_short = data6 ? data6.getAttribute("content") : null;

      var data2 = document.querySelector('meta[name="stadium_name"]');
      var stadium_name = data2 ? data2.getAttribute("content") : null;

      var data3 = document.querySelector('meta[name="team_color"]');
      var team_color = data3 ? data3.getAttribute("content") : null;

      var data4 = document.querySelector('meta[name="team_color_2"]');
      var team_color_2 = data4 ? data4.getAttribute("content") : null;

      var data5 = document.querySelector('meta[name="fileCode"]');
      var fileCode = data5 ? data5.getAttribute("content") : "MLB";

      console.log(team_name);

      branch.setBranchViewData({
        tags: [fileCode],
          data:{
            'team_name': team_name,
            'team_name_short': team_name_short,
            'stadium_name': stadium_name,
            'team_color': team_color,
            'team_color_2': team_color_2
          }
      });

      //creating listener for on journey load
      var listener = function(event, data) {

      }

      // Specify an event to listen for
      branch.addListener('willShowJourney', listener);
	});
</script>
<style>
  body{
    display: flex;
  }
  .fixedNav {
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    height:50px;
    background: blue;
  }
  .content{
    display: flex;
    flex-direction: column;
    flex: 1;
  }
  .content > div {
    flex: 1;
  }
  #pre-content-container{
    margin-top:50px;
  }
  #siteBox{
    display: flex;
  }
  #siteBox > iframe {
    flex: 1;
  }
</style>
</head>
<body>
  <section class="content">
    <div id="siteBox">
      <div id="frameSpot"></div>
    </div>
  </section>

  <script>
    function getParameterByName(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    var testURI = document.getElementById("siteBox");
    var SITE = getParameterByName('site');
    var DECODED = decodeURIComponent(SITE);
    // testURI.innerHTML = '<iframe src="' + DECODED + '"></iframe>';

    var ifrm = document.createElement('iframe');
    ifrm.setAttribute('id', 'ifrm');

    // to place before another page element
    var spot = document.getElementById('frameSpot');
    spot.parentNode.insertBefore(ifrm, spot);

    // assign url
    ifrm.setAttribute('src', DECODED);


    </script>
</body>
</html>
